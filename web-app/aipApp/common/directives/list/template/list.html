<!--*******************************************************************************
 Copyright 2017 Ellucian Company L.P. and its affiliates.
 *******************************************************************************-->
<uib-accordion-group class="aip-list-container" role="tablist" is-open="isOpen">
    <uib-accordion-heading id="heading-{{itemgroup.id}}" role="tab" aria-label="group-title-heading">
        <div class="item-group row">
            <div class="row">
                <div class="group-title col-sm-12 col-xs-12">
                    <div aria-label="{{itemgroup.title}} {{completedItem().length}} of {{itemgroup.items.length}} {{'aip.common.text.completed'|i18n_aip}}"
                        id="h2-{{itemgroup.id}}" class="group-title-text" tabindex="-1"
                        ng-click="openGroup(itemgroup.id)" aria-expanded="{{isOpen}}"><h2 id="group-title-heading" class="group-title-text col-sm-11">{{itemgroup.title|i18n_aip}}</h2>
                    </div>
                    <span class="badge" ng-if="!isOpen" aria-label="{{completedItem().length}} of {{itemgroup.items.length}} {{'aip.common.text.completed'|i18n_aip}}">
                        {{completedItem().length + "/" + itemgroup.items.length}}
                    </span>
                    <i role="presentation" class="group-toggle-indicator fa" ng-class="{'fa-caret-up':isOpen, 'fa-caret-down':!isOpen}"></i>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="group-progress col-sm-12" ng-if="isOpen">
                <uib-progressbar ng-class="{'normal':completedItem().length+1>data.length/2}" max="itemgroup.items.length" value="completedItem().length">
                    <span id="progressbar">{{'aip.progressbar.stats'|i18n_aip:[completedItem().length, itemgroup.items.length] }}</span>
                </uib-progressbar>
            </div>
        </div>

        <div class="row instruction">
            <div class="group-title-icon col-sm-1 col-xs-1">
                <a class="group-instructions" ng-focus="focusing($event)" tabindex="0" href="javascript:void(0);"
                      ng-click="displayGroupInfo(itemgroup.id, $event)" aria-label="{{'aip.common.text.group.instructions'|i18n_aip}}">
                    {{'aip.common.text.group.instructions'|i18n_aip}}</a>
            </div>
        </div>
    </uib-accordion-heading>
    <div class="row">
        <div class="list-body-container box">
            <div id="group-{{itemgroup.id}}" class="list-body" role="tabpanel" aria-labelledby="group-title-heading">
                <div id="item-{{itemgroup.id}}-{{row.id}}"
                     class="row list-item" ng-repeat="row in itemgroup.items" ng-click="selectItem(itemgroup, row, $event)">
                    <div ng-repeat="key in itemgroup.header" class="{{getStyle(key)}}">

                        <h3 ng-if="key==='title'">{{row[key]|i18n_aip}}</h3>
                           <span ng-if="key==='status'">
                            <span ng-class="{'badge pending':key==='status'&&row[key]==='Pending',
                            'badge approve':key==='status'&&row[key]==='Completed'||(key==='status'&&row[key]!=='Completed'&&row[key]!=='Rejected'&&row[key]!=='Pending'), 'badge reject':key==='status'&&row[key]==='Rejected'}">
                            {{row[key]|i18n_aip}}
                            </span>
                        </span>
                        <span class="completedDate" ng-if="key==='completedDate'&&row[key]!==null">
                            <span class="data-label">{{'aip.common.text.date'|i18n_aip}} {{row['status']}} {{'aip.common.text.colon'|i18n_aip}}</span>
                            {{row[key]}}</span>
                        <aip-readmore class="aipReadmore" ng-if="key==='description'">{{row[key]}}</aip-readmore>
                    </div>
                </div>
            </div>
        </div>
    </div>
</uib-accordion-group>
