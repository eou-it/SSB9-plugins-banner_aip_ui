<!--*******************************************************************************
Copyright 2018 Ellucian Company L.P. and its affiliates.
*******************************************************************************-->
<div id="reviewactionitem">
    <div class="row ">
        <div class="col-xs-12 col-sm-2 col-md-2">
            <label for="personId" class="titleValue" id="personId">{{"js.aip.review.monitor.action.personId.label"|i18n_aip}}
            </label>
        </div>
        <div class="col-xs-12 col-sm-7 col-md-7">
            <div class="fieldValue">{{vm.actionItemDetails.spridenId}}</div>
        </div>
    </div>
    <div class="row ">
        <div class="col-xs-12 col-sm-2 col-md-2">
            <label for="personName" class="titleValue" id="personName">{{"js.aip.review.monitor.action.personName.label"|i18n_aip}}
            </label>
        </div>
        <div class="col-xs-12 col-sm-7 col-md-7">
            <div class="fieldValue">{{vm.actionItemDetails.actionItemPersonName}}</div>
        </div>
    </div>
    <div class="row ">
        <div class="col-xs-12 col-sm-2 col-md-2">
            <label for="actionItem" class="titleValue " id="actionItem">{{"js.aip.review.monitor.action.itemLabel"|i18n_aip}}
            </label>
        </div>
        <div class="col-xs-12 col-sm-7 col-md-7">
            <div class="fieldValue">{{vm.actionItemDetails.actionItemName}}</div>
        </div>
    </div>
    <div class="row ">
        <div class="col-xs-12 col-sm-2 col-md-2">
            <label for="currentResponse" class="titleValue " id="currentResponse">{{"aip.user.action.item.last.response"|i18n_aip}}
            </label>
        </div>
        <div class="col-xs-12 col-sm-7 col-md-7">
            <div class="fieldValue">{{vm.actionItemDetails.currentResponseText}}</div>
        </div>
    </div>
    <div class="row ">
        <div class="col-xs-12 col-sm-2 col-md-2">
            <label class="titleValue">{{"js.aip.review.monitor.action.status.response.label"|i18n_aip}}
            </label>
        </div>
        <div class="col-xs-12 col-sm-7 col-md-7">
            <div class="fieldValue">{{vm.actionItemDetails.status}}</div>
        </div>
    </div>
    <div class="row ">
        <div class="col-xs-12 col-sm-2 col-md-2">
            <label class="titleValue">{{"js.aip.review.monitor.action.response.date.label"|i18n_aip}}
            </label>
        </div>
        <div class="col-xs-12 col-sm-7 col-md-7">
            <div class="fieldValue">{{vm.actionItemDetails.responseDate}}</div>
        </div>
    </div>
    <div class="row ">
        <div class="col-xs-12 col-sm-2 col-md-2">
            <label class="titleValue">{{"js.aip.review.monitor.action.display.start.date.label"|i18n_aip}}
            </label>
        </div>
        <div class="col-xs-12 col-sm-7 col-md-7">
            <div class="fieldValue">{{vm.actionItemDetails.displayStartDate}}</div>
        </div>
    </div>
    <div class="row ">
        <div class="col-xs-12 col-sm-2 col-md-2">
            <label for="endDate" class="titleValue " id="endDate">{{"js.aip.review.monitor.action.diplay.end.date.label"|i18n_aip}}
            </label>
        </div>
        <div class="col-xs-12 col-sm-7 col-md-7">
            <div class="fieldValue">{{vm.actionItemDetails.displayEndDate}}</div>
        </div>
    </div>
    <div class="row ">
        <div class="col-xs-12 col-sm-2 col-md-2">
            <label for="numberOfAttachments" class="titleValue " id="numberOfAttachments">{{"js.aip.review.monitor.action.numberOfAttachmentsLabel"|i18n_aip}}
            </label>
        </div>
        <div class="col-xs-12 col-sm-7 col-md-7">
            <div class="fieldValue">{{vm.actionItemDetails.attachments}}</div>
        </div>
    </div>
    <div ng-if="vm.actionItemDetails.attachments>0" class="row">
        <div class="col-xs-12 col-sm-2 col-md-2">
            <label for="viewAttachments" class="titleValue " id="viewAttachments">{{"js.aip.review.monitor.action.viewAttachmentsLabel"|i18n_aip}}
            </label>
        </div>
        <div class="col-xs-12 col-sm-7 col-md-7">
            <input type="image" src="../images/attach_icon_default.svg" class="attachmentimage" ng-click="vm.viewAttachments()">
        </div>
    </div>
    <div class="review-action-item-container">
        <form name="actionItemReviewForm">
            <div class="row">
                <div class="col-xs-12 col-sm-2 col-md-2 col-lg-2">
                    <label class="titleValue">{{"js.aip.review.monitor.action.review.status.label"|i18n_aip}}</label>
                </div>
                <div class="col-xs-12 col-sm-8 col-md-8 col-lg-8" class="actionItemElement">
                    <xe-ui-select class="folder-minwidth" ng-model="vm.selectedReviewState"
                                  theme="select2">
                        <xe-ui-select-match placeholder="{{''|i18n_aip}}">
                            <div ng-bind-html="vm.selectedReviewState.name"></div>
                        </xe-ui-select-match>
                        <xe-ui-select-choices
                                repeat="item in vm.actionItemReviewStatusList | propsFilter: {name: $select.search}">
                            <div ng-bind-html="item.name"></div>
                        </xe-ui-select-choices>
                    </xe-ui-select>
                </div>
            </div>
            <div class="row">
                <div class="col-xs-12 col-sm-2 col-md-2 col-lg-2">
                    <label class="titleValue">{{"js.aip.review.monitor.action.comments.label"|i18n_aip}}</label>
                </div>
                <div class="col-xs-12 col-sm-8 col-md-8 col-lg-8" class="actionItemElement">
                    <input type="checkbox" ng-model="vm.externalCommentInd" value="Y" checked="true">{{"js.aip.review.monitor.action.external.label"|i18n_aip}}
                    <input type="text" class="form-control" ng-model="vm.reviewComments"/>
                </div>
            </div>
            <div class="row">
                <div class="col-xs-12 col-sm-2 col-md-2 col-lg-2">
                    <label class="titleValue">{{"js.aip.review.monitor.action.diplay.end.date.label"|i18n_aip}}</label>
                </div>
                <div class="actionItemElement col-xs-12 col-sm-8 col-md-8 col-lg-8">
                    <input type="text"  date-picker ng-model="vm.actionItemDetails.displayEndDate"
                           class="form-control  Datelement" name="displayEndDate"
                           aria-required="true" required autocomplete="off"
                           placeholder='{{"default.date.format.watermark"|i18n_aip}}'/>
                </div>
            </div>
            <div class="row">
                <div class="col-xs-12 col-sm-2 col-md-2 col-lg-2">
                    <label class="titleValue">{{"js.aip.review.monitor.action.contact.label"|i18n_aip}}</label>
                </div>
                <div class="col-xs-12 col-sm-8 col-md-8 col-lg-8" class="actionItemElement">
                    <input type="text" data-ng-model="vm.contactInfo" class="form-control"/>
                </div>
            </div>
            <div class="row">
                <div class="col-xs-2 col-sm-2 col-md-2 col-lg-2">

                </div>
                <div class="col-xs-8 col-sm-8 col-md-8 col-lg-8" class="actionItemElement">
                 <span>
                    <button name="Cancel" type="button" class="btn btn-primary" ng-click="vm.reset(vm)"
                            ng-disabled="!actionItemReviewForm.$dirty">
                        {{"js.aip.review.monitor.action.resetButtonLabel"|i18n_aip}}
                    </button>
                 </span>
                <span>
                    <button name="Save" type="button" class="btn btn-primary"
                            ng-click="vm.updateActionItemReview();actionItemReviewForm.$setPristine();"
                            ng-disabled="!actionItemReviewForm.$dirty">
                        {{"default.button.save.label"|i18n_aip}}
                    </button>
                </span>
                </div>
            </div>
        </form>
    </div>
    <xe-popup-modal show=vm.showModal focusbackelement="tools"
                    pageheader={{"js.aip.review.monitor.action.viewAttachments.modal.title"|i18n_aip}}>
        <popup-content>
            <div class="attachmentsTable" ng-if="vm.showModal">
                <xe-table-grid
                        table-id="dataTableAttachmentsList"
                        header="header"
                        fetch="vm.fetchData(query)"
                        content="vm.gridData.row"
                        results-found="records"
                        toolbar="false"
                        paginate="false"
                        on-row-click="vm.selectRecord(data)"
                        no-data-msg="{{'aip.common.no.results.found'|i18n_aip}}"
                        pagination-config="paginationConfig"
                        continuous-scrolling="true"
                        continuous-scroll-parent="attachmentsTable"
                        height="10em">
                    <xe-cell-markup column-name="attachmentActions">
                        <div class="row attachmentActions">
                            <button class="view-attachment-icon"
                                    ng-click="vm.previewDocument(row, vm.actionItemDetails.spridenId)"
                                    title="{{'aip.common.open.action.item.jaws'|i18n_aip}}"
                                    aria-label="{{'aip.common.open.action.item.jaws'|i18n_aip}}">
                            </button>
                        </div>
                    </xe-cell-markup>
                </xe-table-grid>
            </div>
        </popup-content>
    </xe-popup-modal>
</div>
